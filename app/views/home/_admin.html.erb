<html>
    <head>
        <%= javascript_include_tag 'owners' %>
    </head>
    <body>
        <%= render partial: "modal"%>
        <div class="container">
            <div class="dashboard">
                <h1>Dashboard</h1>
                <p><%= Date.today.strftime("%d-%m-%Y") %></p>
            </div>
            <div class="search">
            </div>
            <div class="pfp_image">
                <%= image_tag("pfp.webp",class:"image")%>
            </div>
            <div class="name">
                    <span><%= current_user.admin.name %></span>
            </div>
        </div>
        <button type="button" id="myInput1" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">Add Owner</button>

        <div class="container_grid text-center">
            <div class="row">
                <div class="col">
                    <span id="deactive_owners_count">
                    <h4>Deactive Owners</h4>
                    <br />
                    <h6><%= @deactive_count %></h6>
                    </span>
                    <%= link_to 'Activate', owners_path,method: :get%>
                </div>
                <div class="col">
                    <h4>Active PG Owners</h4>
                    <br />
                    <h6><%= @active_count %></h6>

                    <%= link_to 'De-Activate', owners_path, method: :get%>
                </div>
                <div class="col">
                    <h4>Total PG Owners</h4>
                    <br />
                    <h6>The PG Owners created by you:<br /><br /><%= current_user.admin.owners.count%></h6>
                    <%= link_to 'View All', owners_path, method: :get%>
                </div>
                <div class="col">
                    <h4>Total PG's</h4>
                    <br />
                    <h6>The total number of PGs are:</h6>
                    <%count = 0%>
                    <% current_user.admin.owners.each do |owner| %>
                        <% if owner.status=="active" %>
                            <%owner.pg_buildings.each do |building|%>
                                <%count=count+1%>
                            <%end%>
                        <%end%>
                    <%end%>
                    <br />
                    <%= count %>
                    <br />
                    <%= link_to 'View All'%>
                </div>
            </div>
        </div>
    </body>
    <script>
      const myInput1 = document.getElementById('myInput');
      const myModal = document.getElementById('myModal');
      

      myModal.addEventListener('shown.bs.modal', () => {
        myInput.focus();
      });
    </script>
</html>